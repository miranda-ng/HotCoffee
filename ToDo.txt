Привет Шурик! Я очень рад, что ты ко мне заглянул.
Проходи, не стесняйся. Присаживайся. Тут очень нужна твоя помощь. Предлагаю выпить чашечку кофе ;)
Нужен универсальный батник build.bat, для изготовления горячего кофе из свежемолотых зёрен арабики ;)
Если у тебя родилась идея лучше батника - я её принимаю без всяких вопросов!

задачи батника:
1. спрашиваем: "English or Russian?"
	e = English, r = Russian

2. удаляем папки x64 и x86 (или всё содержиое этих папок)

3. проверяем наличие компилятора: ".tools\InnoRT\Compil32.exe"
	если есть, тогда переходим к задаче 4.
	если нет, тогда пауза и сообщаем пользователю:
	"для продолжения требуется компилятор Inno Setup ResTools"
	ниже вопрос "Продолжить?"
	y = да, n = нет
	если нет, тогда стоп и закрыть окно
	если да, тогда скачиваем архив отсюда: https://miranda-ng.org/distr/packs/HotCoffee/.InnoRT.7z и распаковываем в папку .tools\InnoRT

set url="https://miranda-ng.org/distr/packs/HotCoffee/.InnoRT.7z"
set dest="InnoRT.7z"
call ".tools\curl.exe" %url% --output %dest%
call ".tools\7z.exe" x %dest% -aoa -o".tools\InnoRT" -y
del %dest%

// Miranda Stable 32bit: лежит по адресу: https://miranda-ng.org/distr/stable/miranda-ng-v0.95.13.1.7z
// Miranda Stable 64bit: лежит по адресу: https://miranda-ng.org/distr/stable/miranda-ng-v0.95.13.1_x64.7z

// Miranda Development 32bit: лежит по адресу: https://miranda-ng.org/distr/miranda-ng-alpha-latest.7z
// Miranda Development 64bit: лежит по адресу: https://miranda-ng.org/distr/miranda-ng-alpha-latest_x64.7z

// русский лангпак Stable: лежит по адресу: https://miranda-ng.org/distr/stable/x32/Languages/langpack_russian.zip
// русский лангпак Development: лежит по адресу: https://miranda-ng.org/distr/x32/Languages/langpack_russian.zip

// компоненты Stable 32bit: лежат по адресу: https://miranda-ng.org/distr/stable/x32/Plugins/имя компонента.zip
// компоненты Stable 64bit: лежат по адресу: https://miranda-ng.org/distr/stable/x64/Plugins/имя компонента.zip

// компоненты Development 32bit: лежат по адресу: https://miranda-ng.org/distr/x32/Plugins/имя компонента.zip
// компоненты Development 64bit: лежат по адресу: https://miranda-ng.org/distr/x64/Plugins/имя компонента.zip

4. спрашиваем: "Какую версию вы предпочитаете?"
	s = Stable, d = Development
	и на основании выбора определяем какую версию будем скачивать...

	4.1.
	скачиваем оба минимальных архива Miranda и распаковываем их в папки x86 и x64 соответственно

если Development то так:

set url="https://www.miranda-ng.org/distr/miranda-ng-alpha-latest.7z"
set dest="x86\miranda-ng.7z"
call ".tools\curl.exe" %url% --output %dest%
call ".tools\7z.exe" x %dest% -aoa -o"x86\" -x!mirandaboot.ini -y
del %dest%

set url="https://www.miranda-ng.org/distr/miranda-ng-alpha-latest_x64.7z"
set dest="x64\miranda-ng.7z"
call ".tools\curl.exe" %url% --output %dest%
call ".tools\7z.exe" x %dest% -aoa -o"x64\" -x!Icons -x!Plugins\Import -x!mirandaboot.ini -y
del %dest%

если Stable то так:

set url="https://miranda-ng.org/distr/stable/miranda-ng-v0.95.13.1.7z"
set dest="x86\miranda-ng.7z"
call ".tools\curl.exe" %url% --output %dest%
call ".tools\7z.exe" x %dest% -aoa -o"x86\" -x!mirandaboot.ini -y
del %dest%

set url="https://miranda-ng.org/distr/stable/miranda-ng-v0.95.13.1_x64.7z"
set dest="x64\miranda-ng.7z"
call ".tools\curl.exe" %url% --output %dest%
call ".tools\7z.exe" x %dest% -aoa -o"x64\" -x!Icons -x!Plugins\Import -x!mirandaboot.ini -y
del %dest%

	4.2.
	скачиваем лангпак и распаковываем его в папку x86\Languages

если Development то так:

set url="https://miranda-ng.org/distr/x32/Languages/langpack_russian.zip"
set dest="x86\langpack_russian.zip"
call ".tools\curl.exe" %url% --output %dest%
call ".tools\7z.exe" x %dest% -aoa -o"x86\" -y
del %dest%

если Stable то так:

set url="https://miranda-ng.org/distr/stable/x32/Languages/langpack_russian.zip"
set dest="x86\langpack_russian.zip"
call ".tools\curl.exe" %url% --output %dest%
call ".tools\7z.exe" x %dest% -aoa -o"x86\" -y
del %dest%

	4.3.
	// если батник такое умеет, то нужно создать переменную с перечислением требующихся имён компонентов
	скачиваем все перечисленные компоненты и распаковываем их в папки x86 и x64 соответственно

если Development то так:

set url="https://miranda-ng.org/distr/x32/Plugins/имя компонента.zip"
set dest="x86\имя компонента.zip"
call ".tools\curl.exe" %url% --output %dest%
call ".tools\7z.exe" x %dest% -aoa -o"x86\" -y
del %dest%

set url="https://miranda-ng.org/distr/x64/Plugins/имя компонента.zip"
set dest="x64\имя компонента.zip"
call ".tools\curl.exe" %url% --output %dest%
call ".tools\7z.exe" x %dest% -aoa -o"x64\" -x!Icons -x!Plugins\CurrencyRates\*.xml -x!Plugins\Weather -y
del %dest%

если Stable то так:

set url="https://miranda-ng.org/distr/stable/x32/Plugins/имя компонента.zip"
set dest="x86\имя компонента.zip"
call ".tools\curl.exe" %url% --output %dest%
call ".tools\7z.exe" x %dest% -aoa -o"x86\" -y
del %dest%

set url="https://miranda-ng.org/distr/stable/x64/Plugins/имя компонента.zip"
set dest="x64\имя компонента.zip"
call ".tools\curl.exe" %url% --output %dest%
call ".tools\7z.exe" x %dest% -aoa -o"x64\" -x!Icons -x!Plugins\CurrencyRates\*.xml -x!Plugins\Weather -y
del %dest%

5. из папки Sources копируем всё содержимое в папку x86

6. обязательно в такой последовательности: сразу xpk потом xpk_hotcoffee...
запускаем патчер иконок "Sources\Skins\IconPacks\IconPatcher.exe" с ключиком /verysilent и патчим набором xpk обе версии миранды x64 и x86
после завершения патчера снова запускаем патчер иконок с ключиком /verysilent и патчим уже набором xpk_hotcoffee

7. после завершения патчера запускаем компиляцию на основе файла MirandaHotCoffee.iss
сначала компилим например версию x64, а после завершения компилим x86 соответственно

8. после компиляции вопрос: "Удалить папки x64 и x86?"
	y = да, n = нет
	если да, удаляем папки

9. сообщаем об успешном выполнении: "Ваш горячий кофе готов! Наслаждайтесь! ;)"

10. если такое возможно: когда юзер закроет комстроку, открываем папку output в проводнике